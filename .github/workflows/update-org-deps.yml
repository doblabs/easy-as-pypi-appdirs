# vim:tw=0:ts=2:sw=2:et:norl
# Author: Landon Bouma <https://tallybark.com/>
# Project: https://github.com/doblabs/easy-as-pypi#ðŸ¥§
# License: MIT

---

name: Repository Dispatch

on:
  repository_dispatch:
    types: [update-org-deps]

jobs:

  blather:
    name: Blather
    runs-on: ubuntu-latest
    steps:
      - name: Dump github.event
        run: echo "${GITHUB_EVENT}"
        shell: bash
        env:
          GITHUB_EVENT: ${{ toJson(github.event) }}

  update-deps:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
        with:
          ref: ${{ github.event.repository.default_branch }}
          # Fetch all history, so rev-parse HEAD is real HEAD.
          fetch-depth: 0
      - run: |
          echo "github.event.client_payload.sha: ${{ github.event.client_payload.sha }}"
          echo "github.event.client_payload.ref: ${{ github.event.client_payload.ref }}"
